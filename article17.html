<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="all" />
        <meta name="keywords" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <meta name="description" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <title>书香黄麓</title>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.fancybox.3.5.7.css" />
        <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!-- 页面自适应 -->
    </head>

    <body>
        <header id="header">
            <nav>
                <div id="logo"></div>
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="history">黄麓历史</a></li>
                    <li><a href="landscape">黄麓风景</a></li>
                    <li><a href="about" class="current">关于作者</a></li>
                </ul>
            </nav>
        </header>

        <article>
            <div id="articleDetail">
                <h2>Maven & mvnd</h2>
                <div id="summary">
                    <p>
                        <span class="quote">“</span>
                        Maven 几乎是所有 Java 开发者的构建工具，优点是稳定可靠，缺点是构建太慢。而 maven-mvnd 是 Apache Maven 团队借鉴了 Gradle 和 Takari（Maven 生命周期优化器）后衍生出的更快的构建工具。
                    </p>
                </div>
                <div><p class="title">一，Linux 下安装 Maven</p>
<p>1，下载：wget http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.zip</p>
<p>2，解压：unzip apache-maven-3.6.3-bin.zip</p>
<p>3，配置：vim /etc/profile，追加：</p>
<div class="code">
<p>export MAVEN_HOME=/home/apache-maven-3.6.3</p>
<p>export PATH=$PATH:$JAVA_HOME/bin:$MAVEN_HOME/bin</p>
</div>
<p>4，生效：source /etc/profile</p>
<p>5，验证：mvn -v</p>
<br />


<p class="title">
    二，Mac 下 Maven 的安装 1
</p>
<p>
    1，下载 bin.zip 格式，<a href="http://maven.apache.org/download.cgi" target="_blank">http://maven.apache.org/download.cgi</a>
</p>
<p>
    2，将下载后的 Maven 文件夹拷贝到某目录
</p>
<p>
    3，配置环境变量：vim .zshrc
</p>

<div class="code">
<p>
    export M2_HOME=/Users/young/apache-maven-3.6.3
</p>
<p>
    export PATH=$PATH:$M2_HOME/bin
</p>
</div>

<p>
    4，验证：mvn -v
</p>

<br />

<p class="title">
    二，Mac 下 Maven 的安装 2
</p>
<p>
    1，下载：brew install maven
</p>
<p>
    2，配置文件：vim /usr/local/Cellar/maven/3.5.0/libexec/conf/settings.xml
</p>
<br />



<p class="title">
    四，Maven 的基本配置
</p>

<p>
    1，修改maven仓库的存储位置，添加：&lt;localRepository&gt;/Users/young/repo&lt;/localRepository&gt;
</p>

<p>
    2，修改 Maven 仓库镜像：
</p>

<div class="code">
    <p>
        &lt;mirror&gt;
    </p>
    <p>
        &lt;id&gt;alimaven&lt;/id&gt;
    </p>
    <p>
        &lt;name&gt;aliyun maven&lt;/name&gt;
    </p>
    <p>
        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
    </p>
    <p>
        &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
    </p>
    <p>
        &lt;/mirror&gt;
    </p>
</div>

<br />


<p class="title">五，Maven 的使用</p>
<p>1，mvn clean  删除 target 构建文件</p>
<p>2，mvn compile  编译项目</p>
<p>3，mvn  install  生成 jar 包到本地仓库目录</p>
<p>4，mvn clean source:jar package  生成源代码</p>
<p>5，mvn test 跑单元测试</p>
<p>6，mvn clean deploy 打包后发布到私服</p>
<p>7，mvn site 生成文档站点</p>
<p>8，忽略测试和文档1：mvn clean package -D maven.test.skip=true -D maven.javadoc.skip=true</p>
<p>9，忽略测试和文档2：mvn clean package -DskipTests -DskipDocs（推荐）</p>
<br />



<br />
<p style="text-align: center;">
    <a href="images/article/article17.00.png" data-fancybox>
        <img src="images/article/article17.00.png" />
    </a>
</p>
<br />



<p class="title">六，Maven 项目打包后的代码与依赖分离 - 1，将 war 改成：jar</p>
<div class="code">
    <p>&lt;packaging&gt;<span class="red">jar</span>&lt;/packaging&gt;</p>
</div>


<p class="title">六，Maven 项目打包后的代码与依赖分离 - 2，注释下面通用的打包工具</p>
<div class="code">
<p>&lt;plugin&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</p>
<p>&lt;/plugin&gt;</p>
</div>


<p class="title">六，Maven 项目打包后的代码与依赖分离 - 3，</p>
<div class="code">
<p>&lt;plugin&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;configuration&gt;</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;archive&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;manifest&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;addClasspath&gt;true&lt;/addClasspath&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;classpathPrefix&gt;lib&lt;/classpathPrefix&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;mainClass&gt;com.company.Application&lt;/mainClass&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/manifest&gt;</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/archive&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/configuration&gt;</p>
<p>&lt;/plugin&gt;</p>
<br/>

<p>&lt;plugin&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;executions&gt;</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;execution&gt;</p>
			<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;copy-dependencies&lt;/id&gt;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase&gt;prepare-package&lt;/phase&gt;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;goals&gt;</p>
				<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;goal&gt;copy-dependencies&lt;/goal&gt;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/goals&gt;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;configuration&gt;</p>
				<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;</p>
				<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;</p>
				<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;</p>
				<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/configuration&gt;</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/execution&gt;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/executions&gt;</p>
<p>&lt;/plugin&gt;</p>
</div>
<br />


<p class="title">六，Maven 项目打包后的代码与依赖分离 - 4，其他方法</p>
<div class="code">
    <p>mvn clean dependency:copy-dependencies  -DoutputDirectory=target/lib package</p>
</div>
<br />


<p class="title">七，mvnd 安装</p>
<p>1，GitHub 上的 Apache 仓库地址：<a href="https://github.com/apache/maven-mvnd/releases" target="_blank">https://github.com/apache/maven-mvnd/releases</a></p>
<p>2，下载后解压，然后将 bin 目录添加到 PATH<div class="code"><p>export PATH=$PATH:/home/mvnd-0.7.1/bin</p></div></p>
<p>3，验证：mvnd --version</p>
<p>4，如果 Windows 系统出现：VCRUNTIME140.dll was not found，到 https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads. 下载：VC_redist.x64.exe，然后安装</p>
<p>5，默认情况下，mvnd 使用多个 CPU 内核并行构建</p>
<p>6，使用：<div class="code"><p>mvnd clean package -Dquickly</p></div></p>
<br />



<p class="title">八，macOS Monterey 下执行会出现：</p>
<p>1，授权：chmod +x /Users/yxx/mvnd-0.7.1/bin/mvnd（给执行权限）</p>
<p>2，运行：mvnd --version 会出现："mvnd" cannot be opened becuase the developer cannot be verified.</p>
<p>3，解决：System Preferences -> Security & Privacy -> General -> Allow apps downloaded from：App Store and idenetified developers 点：Allow Anyway</p>
<br />


<p class="title">九，IDEA 或 VSCode 下如何使用 mvnd ？</p>
<p>1，在 Terminal 中直接输入：<div class="code"><p>mvnd clean install/compile/package -Dquickly</p></div></p>
<br />


<p class="title">十，Jenkins 如何配置 mvnd ？</p>
<p>1，创建一个自由风格的项目</p>
<p>2，Discard old builds -> 1 -> 1</p>
<p>3，配置 Git</p>
<p>4，构建 -> Execute shell<div class="code"><p>BUILD_ID=DONTKILLME</p><p>/bin/bash /home/abc.sh</p></div></p>
<p>5，在服务器上编辑：vim /home/abc.sh</p>
<br /></div>
                <h4>Posted: 2022-02-12 10:02:18</h4>
            </div>
            <div id="articleAside">
                <div id="category"></div>
            </div>
        </article>

        <footer id="footer"></footer>

        <script src="js/jquery-3.6.0.js"></script>
        <script src="js/public.js"></script>
        <script src="js/jquery.fancybox.3.5.7.js"></script>
    </body>
</html>